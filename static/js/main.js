// Generated by CoffeeScript 1.4.0
(function() {
  var LayoutViewModel, ready,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  $.contextMenu({
    selector: '.right-click-edit',
    build: function($trigger, e) {
      console.log($trigger[0]);
      console.log($trigger);
      console.log(e);
      return {
        callback: function(key, options) {
          var m;
          m = "clicked: " + key;
          return window.console && console.log(m) || alert(m);
        },
        items: {
          "edit": {
            name: "Change Image",
            icon: "edit"
          }
        }
      };
    }
  });

  LayoutViewModel = (function() {

    function LayoutViewModel() {
      this._requestLayout = __bind(this._requestLayout, this);
      this.header = ko.observable({
        text: 'ack'
      });
      this.layoutItems = ko.observableArray();
      this._requestLayout();
    }

    LayoutViewModel.prototype.addWidgetInfo = function(index) {
      return index;
      return console.log(index);
    };

    LayoutViewModel.prototype.addWidget = function() {
      $('#add-widget-dialog').dialog({});
      return console.log($('#add-widget-dialog'));
    };

    LayoutViewModel.prototype.addGallery = function(index) {
      return console.log(index);
    };

    LayoutViewModel.prototype._requestLayout = function() {
      var callback,
        _this = this;
      callback = function(data) {
        console.log(data);
        _this.header({
          text: data.header
        });
        return _this.layoutItems(data.widgets);
      };
      return $.getJSON("/layout", callback);
    };

    return LayoutViewModel;

  })();

  ready = function() {
    ko.applyBindings(new LayoutViewModel());
    return console.log('starting knockout');
  };

  $(document).ready(ready);

  $(document).on('page:load', ready);

}).call(this);
