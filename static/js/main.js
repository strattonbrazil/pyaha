// Generated by CoffeeScript 1.4.0
(function() {
  var LayoutViewModel, ready,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  LayoutViewModel = (function() {

    function LayoutViewModel() {
      this._requestLayout = __bind(this._requestLayout, this);
      this.header = ko.observable({});
      this.layoutItems = ko.observableArray();
      this._requestLayout();
    }

    LayoutViewModel.prototype.addWidgetInfo = function(index) {
      return index;
      return console.log(index);
    };

    LayoutViewModel.prototype.addWidget = function() {
      $('#add-widget-dialog').dialog({});
      return console.log($('#add-widget-dialog'));
    };

    LayoutViewModel.prototype.addGallery = function(index) {
      return console.log(index);
    };

    LayoutViewModel.prototype._requestLayout = function() {
      var callback,
        _this = this;
      callback = function(data) {
        var widget, _i, _len, _ref;
        console.log(data);
        _this.header({
          text: data.header
        });
        _ref = data.widgets;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          widget = _ref[_i];
          _this.layoutItems.push(widget);
        }
        return console.log(_this.layoutItems());
      };
      return $.getJSON("/layout", callback);
    };

    return LayoutViewModel;

  })();

  ready = function() {
    ko.applyBindings(new LayoutViewModel());
    return console.log('starting knockout');
  };

  $(document).ready(ready);

  $(document).on('page:load', ready);

}).call(this);
